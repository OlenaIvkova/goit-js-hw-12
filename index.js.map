{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46125856-848a47cf49f0e2da350750fba'; // API-ключ\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nexport const fetchImages = async (query, page = 1) => {\n    try {\n        const response = await axios.get(`${BASE_URL}`, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 15,\n                page: page,\n            },\n        });\n\n        if (response.status !== 200) {\n            throw new Error('Error fetching images');\n        }\n\n        return response.data;\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n};","// import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport const renderImages = images => {\n    const gallery = document.querySelector('.gallery');\n    // gallery.innerHTML = '';\n\n    if (images.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message:\n                'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n    }\n\n    const markup = images\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => `\n            <li class=\"gallery-item\">\n                <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n                </a>\n                <div class=\"info\">\n                    <p class=\"info-item\"><span>Likes:</span> ${likes}</p>\n                    <p class=\"info-item\"><span>Views:</span> ${views}</p>\n                    <p class=\"info-item\"><span>Comments:</span> ${comments}</p>\n                    <p class=\"info-item\"><span>Downloads:</span> ${downloads}</p>\n                </div>\n            </li>\n        `\n        )\n        .join('');\n\n    // gallery.innerHTML = markup;\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n    document.querySelector('.gallery').innerHTML = '';\n};\n\nexport const showLoader = () => {\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.style.display = 'block';\n    }\n};\n\nexport const hideLoader = () => {\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.style.display = 'none';\n    }\n};\n\nexport const showLoadMoreButton = () => {\n    const loadMoreBtn = document.querySelector('.load-more');\n    loadMoreBtn.style.display = 'block';\n};\n\nexport const hideLoadMoreButton = () => {\n    const loadMoreBtn = document.querySelector('.load-more');\n    loadMoreBtn.style.display = 'none';\n};\n\nexport const showEndOfResultsMessage = () => {\n    iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n    });\n};","import { fetchImages } from './js/pixabay-api.js';\nimport {\n    renderImages,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    showEndOfResultsMessage,\n} from './js/render-functions.js';\n\nconst searchForm = document.querySelector('.search-form');\n// const lightbox = new SimpleLightbox('.gallery a');\n\n\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.classList.add('load-more');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.style.display = 'none';\ndocument.body.appendChild(loadMoreBtn);\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    // const query = document.querySelector('input[name=\"query\"]').value.trim();\n    query = document.querySelector('input[name=\"query\"]').value.trim();\n    page = 1;\n    if (!query) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Search query cannot be empty.',\n        });\n        return;\n    }\n\n    clearGallery();\n    hideLoadMoreButton();\n\n    try {\n        showLoader();\n        const data = await fetchImages(query, page);\n        totalHits = data.totalHits;\n\n        if (data.hits.length > 0) {\n            renderImages(data.hits);\n            showLoadMoreButton();\n        }\n\n        if (data.hits.length < 15 || page * 15 >= totalHits) {\n            hideLoadMoreButton();\n            showEndOfResultsMessage();\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again later.',\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n\n    try {\n        showLoader();\n        const data = await fetchImages(query, page);\n        renderImages(data.hits);\n\n        if (page * 15 >= totalHits) {\n            hideLoadMoreButton();\n            showEndOfResultsMessage();\n        }\n\n        // Smooth scroll\n        const gallery = document.querySelector('.gallery');\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again later.',\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\n// showLoader();\n// fetchImages(query)\n//     .then(images => {\n//         renderImages(images);\n//     })\n//     .catch(error => {\n//         console.error(error);\n//         iziToast.error({\n//             title: 'Error',\n//             message:\n//                 'An error occurred while fetching images. Please try again later.',\n//         });\n//     })\n//     .finally(() => {\n//         hideLoader();\n//     });\n// });"],"names":["API_KEY","BASE_URL","fetchImages","query","page","response","axios","error","lightbox","SimpleLightbox","renderImages","images","gallery","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","loadMoreBtn","hideLoadMoreButton","showEndOfResultsMessage","searchForm","totalHits","event","data","cardHeight"],"mappings":"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"}